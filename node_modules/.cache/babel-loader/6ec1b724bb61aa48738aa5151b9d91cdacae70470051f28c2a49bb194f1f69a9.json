{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ngsha\\\\Documents\\\\GitHub\\\\ay2324s1-course-assessment-g47\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n// import { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass LoginPage extends Component {\n  constructor() {\n    var _s = $RefreshSig$();\n    super();\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n    this.handleSubmit = _s(async e => {\n      _s();\n      const navigate = useNavigate();\n      e.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n\n      // Make an HTTP POST request to the server's /users/login endpoint\n      try {\n        const response = await fetch(\"http://localhost:4000/users/login\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (response.status === 200) {\n          // Successful login\n          const data = await response.json();\n          this.setState({\n            loginSuccess: data.message,\n            loginError: \"\"\n          });\n          console.log(\"Login successful\");\n          // navigate(\"/home\");\n          // Redirect using history.push\n          this.props.history.push(\"/home\");\n        } else if (response.status === 401) {\n          // Invalid email or password\n          const errorData = await response.json();\n          this.setState({\n            loginError: errorData.error,\n            loginSuccess: \"\"\n          });\n          console.log(\"Login failed: \" + errorData.error);\n        } else {\n          // Handle other error cases\n          console.log(\"Server error\");\n        }\n      } catch (error) {\n        console.error(\"Error:\", error);\n      }\n    }, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n      return [useNavigate];\n    });\n    this.state = {\n      email: \"\",\n      password: \"\",\n      loginError: \"\",\n      // Add a state for displaying login errors\n      loginSuccess: \"\" // Add a state for displaying login success\n    };\n  }\n\n  render() {\n    const {\n      email,\n      password,\n      loginError,\n      loginSuccess\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            value: email,\n            onChange: this.handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            value: password,\n            onChange: this.handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 6\n        }, this), loginError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error\",\n          children: loginError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), loginSuccess && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"success\",\n          children: loginSuccess\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/register\",\n          children: \"Not a user? Sign up now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/forgot-password\",\n          children: \"Forgot password? Reset here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 4\n    }, this);\n  }\n}\nexport default LoginPage;","map":{"version":3,"names":["React","Component","useNavigate","jsxDEV","_jsxDEV","LoginPage","constructor","_s","$RefreshSig$","handleChange","e","setState","target","name","value","handleSubmit","navigate","preventDefault","email","password","state","response","fetch","method","headers","body","JSON","stringify","status","data","json","loginSuccess","message","loginError","console","log","props","history","push","errorData","error","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","required","href"],"sources":["C:/Users/ngsha/Documents/GitHub/ay2324s1-course-assessment-g47/src/components/Login.js"],"sourcesContent":["import React, { Component } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n// import { Navigate } from \"react-router-dom\";\r\n\r\nclass LoginPage extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tloginError: \"\", // Add a state for displaying login errors\r\n\t\t\tloginSuccess: \"\", // Add a state for displaying login success\r\n\t\t};\r\n\t}\r\n\r\n\thandleChange = (e) => {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = async (e) => {\r\n\t\tconst navigate = useNavigate();\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tconst { email, password } = this.state;\r\n\r\n\t\t// Make an HTTP POST request to the server's /users/login endpoint\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\"http://localhost:4000/users/login\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({ email, password }),\r\n\t\t\t});\r\n\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\t// Successful login\r\n\t\t\t\tconst data = await response.json();\r\n\t\t\t\tthis.setState({ loginSuccess: data.message, loginError: \"\" });\r\n\t\t\t\tconsole.log(\"Login successful\");\r\n\t\t\t\t// navigate(\"/home\");\r\n\t\t\t\t// Redirect using history.push\r\n\t\t\t\tthis.props.history.push(\"/home\");\r\n\t\t\t} else if (response.status === 401) {\r\n\t\t\t\t// Invalid email or password\r\n\t\t\t\tconst errorData = await response.json();\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloginError: errorData.error,\r\n\t\t\t\t\tloginSuccess: \"\",\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"Login failed: \" + errorData.error);\r\n\t\t\t} else {\r\n\t\t\t\t// Handle other error cases\r\n\t\t\t\tconsole.log(\"Server error\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { email, password, loginError, loginSuccess } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"login-page\">\r\n\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"email\">Email:</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"password\">Password:</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{loginError && <p className=\"error\">{loginError}</p>}\r\n\t\t\t\t\t{loginSuccess && <p className=\"success\">{loginSuccess}</p>}\r\n\t\t\t\t\t<button type=\"submit\">Login</button>\r\n\t\t\t\t</form>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{/* Not a user? <Link to=\"/register\">Sign Up now</Link> */}\r\n\t\t\t\t</p>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<a href=\"/register\">Not a user? Sign up now</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<a href=\"/forgot-password\">Forgot password? Reset here</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}